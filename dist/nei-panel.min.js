/*
    Title: Nei-Panel
    Author: Neimark Junsay Braga
    Date: 9/25/17
    Version: 1.0.0
*/
$.fn.neipanel=function(l){var e=this,r=function(a,e){var h,b,d,f,g,m,k,p=e||function(a){};a.addEventListener("touchstart",function(a){var n=a.changedTouches[0];h=null;b=n.pageX;d=n.pageY;k=(new Date).getTime();a.preventDefault()},!1);a.addEventListener("touchmove",function(a){a.preventDefault()},!1);a.addEventListener("touchend",function(a){var n=a.changedTouches[0];f=n.pageX-b;g=n.pageY-d;m=(new Date).getTime()-k;300>=m&&(150<=Math.abs(f)&&100>=Math.abs(g)?h=0>f?"left":"right":150<=Math.abs(g)&&100>=Math.abs(f)&&(h=0>g?"up":"bottom"));p(h);a.preventDefault()},!1)},t=function(a){var l=this;a=(this.option=a)||{};a.panelClass=a.panelClass||"";a.hideBarClass=a.hideBarClass||"";a.hideIconClass=a.hideIconClass||"";a.hideDuration=a.hideDuration||400;a.showDuration=a.showDuration||400;a.position=-1<["top","right","bottom","left"].indexOf(a.position)?a.position:"left";a.panelSize=a.panelSize||"300px";a.hideBarSize=a.hideBarSize||"20px";a.iconSize=a.iconSize||"10px";a.iconColor=a.iconColor||"rgb(75,75,75)";a.zIndex=a.zIndex||3;a.backdropOpacity=a.backdropOpacity||".5";a.swipe=void 0==a.swipe?!0:a.swipe;a.backdrop=void 0==a.backdrop?!0:a.backdrop;a.displayHideBar=void 0==a.displayHideBar?!0:a.displayHideBar;var h=[],b=void 0,d={top:"top"==a.position,right:"right"==a.position,bottom:"bottom"==a.position,left:"left"==a.position},f=document.createElement("div"),g=document.createElement("div"),m=document.createElement("span"),k=document.createElement("div"),p=d.bottom||d.top?"height":"width",q=function(a){switch(a){case "top":return"bottom";case "bottom":return"top";case "left":return"right";case "right":return"left";default:return null}};$(k).attr("class",a.panelClass).css("background-color","white").css("overflow","auto").css("position","fixed").css("z-index",String(parseInt(a.zIndex)+1)).css("height",d.bottom||d.top?a.panelSize:"100%").css("width",d.right||d.left?a.panelSize:"100%").append(e);for(b in d)b!=q(a.position)&&$(k).css(b,"0");$(k).css(a.position,"-105%");$(m).attr("class",a.hideIconClass);for(b in d)b==q(a.position)?$(m).css("border-"+b,a.iconSize+" solid "+a.iconColor):b!=a.position&&$(m).css("border-"+b,a.iconSize+" solid transparent");$(g).attr("class",a.hideBarClass).css("background-color","rgba(255,255,255,.5)").css("justify-content","center").css("align-items","center").css("overflow","hidden").css("cursor","pointer").css("position","fixed").css("display",a.displayHideBar?"flex":"none").css("height",d.bottom||d.top?"0":"100%").css("width",d.right||d.left?"0":"100%").css("z-index",String(parseInt(a.zIndex)+1)).append(m).on("click",function(){l.hide()});for(b in d)b!=q(a.position)&&$(g).css(b,"0");$(f).css("background-color","black").css("position","fixed").css("height","100%").css("width","100%").css("opacity","0").css("z-index",a.zIndex).css("top","-105%").css("right","0").css("bottom","0").css("left","0").on("click",function(){a.backdrop&&l.hide()});r(f,function(d){d==a.direction&&a.swipe&&l.hide()});$("body").append(k).append(g).append(f);this.show=function(){var d=function(c){if(!c.isDefaultPrevented()){$(f).css("top","0");c=$("body *").not($(k)).not($(k).find("*")).not($(g)).not($(g).find("*")).not($(f)).not("script");$("body").css("overflow","hidden");var b={};b[a.position]="0";$(k).animate(b,a.showDuration,"swing",function(){$(e).trigger({type:"neipanel.shown"})});b={};b[p]=a.hideBarSize;b[a.position]=a.panelSize;$(g).animate(b,a.showDuration);$(f).animate({opacity:a.backdropOpacity},a.showDuration);for(b=0;b<c.length;b++)-1<c[b].tabIndex&&(h.push([c[b],c[b].tabIndex]),c[b].tabIndex="-1")}$(e).off("neipanel.show",d)};$(e).on("neipanel.show",d);$(e).trigger({type:"neipanel.show"})};this.hide=function(){var b=function(c){if(!c.isDefaultPrevented()){$("body").css("overflow","");c={};c[a.position]="-105%";$(k).animate(c,a.hideDuration,"swing",function(){$(e).trigger({type:"neipanel.hidden"})});c={};c[p]="0";c[a.position]="0";$(g).animate(c,a.hideDuration);$(f).animate({opacity:"0"},a.hideDuration,"swing",function(){$(f).css("top","-105%")});for(c=0;c<h.length;c++)h[c][0].tabIndex="-1"==h[c][1]?void 0:h[c][1];h=[]}$(e).off("neipanel.hide",b)};$(e).on("neipanel.hide",b);$(e).trigger({type:"neipanel.hide"})}};if(l.constructor!=String)$(e).data("neipanel",new t(l));else if($(e).data("neipanel"))$(e).data("neipanel")[l]()};