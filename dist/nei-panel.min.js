/*
    Title: Nei-Panel
    Author: Neimark Junsay Braga
    Date: 9/25/17
    Version: 1.0.0
*/
$.fn.neipanel=function(l){var k=this,q=function(a,k){var g,c,b,d,f,m,h,n=k||function(a){};a.addEventListener("touchstart",function(a){var e=a.changedTouches[0];g=null;c=e.pageX;b=e.pageY;h=(new Date).getTime();a.preventDefault()},!1);a.addEventListener("touchmove",function(a){a.preventDefault()},!1);a.addEventListener("touchend",function(a){var e=a.changedTouches[0];d=e.pageX-c;f=e.pageY-b;m=(new Date).getTime()-h;300>=m&&(150<=Math.abs(d)&&100>=Math.abs(f)?g=0>d?"left":"right":150<=Math.abs(f)&&100>=Math.abs(d)&&(g=0>f?"up":"bottom"));n(g);a.preventDefault()},!1)},r=function(a){var l=this;a=(this.option=a)||{};a.panelClass=a.panelClass||"";a.hideBarClass=a.hideBarClass||"";a.hideIconClass=a.hideIconClass||"";a.hideDuration=a.hideDuration||400;a.showDuration=a.showDuration||400;a.position=-1<["top","right","bottom","left"].indexOf(a.position)?a.position:"left";a.panelSize=a.panelSize||"300px";a.hideBarSize=a.hideBarSize||"20px";a.iconSize=a.iconSize||"10px";a.iconColor=a.iconColor||"rgb(75,75,75)";a.zIndex=a.zIndex||3;a.backdropOpacity=a.backdropOpacity||".5";a.swipe=void 0==a.swipe?!0:a.swipe;a.backdrop=void 0==a.backdrop?!0:a.backdrop;a.displayHideBar=void 0==a.displayHideBar?!0:a.displayHideBar;var g=[],c=void 0,b={top:"top"==a.position,right:"right"==a.position,bottom:"bottom"==a.position,left:"left"==a.position},d=document.createElement("div"),f=document.createElement("div"),m=document.createElement("span"),h=document.createElement("div"),n=b.bottom||b.top?"height":"width",p=function(a){switch(a){case "top":return"bottom";case "bottom":return"top";case "left":return"right";case "right":return"left";default:return null}};$(h).attr("class",a.panelClass).css("background-color","white").css("overflow","auto").css("position","fixed").css("z-index",String(parseInt(a.zIndex)+1)).css("height",b.bottom||b.top?a.panelSize:"100%").css("width",b.right||b.left?a.panelSize:"100%").append(k);for(c in b)c!=p(a.position)&&$(h).css(c,"0");$(h).css(a.position,"-105%");$(m).attr("class",a.hideIconClass);for(c in b)c==p(a.position)?$(m).css("border-"+c,a.iconSize+" solid "+a.iconColor):c!=a.position&&$(m).css("border-"+c,a.iconSize+" solid transparent");$(f).attr("class",a.hideBarClass).css("background-color","rgba(255,255,255,.5)").css("justify-content","center").css("align-items","center").css("overflow","hidden").css("cursor","pointer").css("position","fixed").css("display",a.displayHideBar?"flex":"none").css("height",b.bottom||b.top?"0":"100%").css("width",b.right||b.left?"0":"100%").css("z-index",String(parseInt(a.zIndex)+1)).append(m).on("click",function(){l.hide()});for(c in b)c!=p(a.position)&&$(f).css(c,"0");$(d).css("background-color","black").css("position","fixed").css("height","100%").css("width","100%").css("opacity","0").css("z-index",a.zIndex).css("top","-105%").css("right","0").css("bottom","0").css("left","0").on("click",function(){a.backdrop&&l.hide()});q(d,function(e){e==a.direction&&a.swipe&&l.hide()});$("body").append(h).append(f).append(d);this.show=function(){$(d).css("top","0");var e=$("body *").not($(h)).not($(h).find("*")).not($(f)).not($(f).find("*")).not($(d)).not("script");$(k).trigger({type:"neipanel.show"});$("body").css("overflow","hidden");var b={};b[a.position]="0";$(h).animate(b,a.showDuration,"swing",function(){$(k).trigger({type:"neipanel.shown"})});b={};b[n]=a.hideBarSize;b[a.position]=a.panelSize;$(f).animate(b,a.showDuration);$(d).animate({opacity:a.backdropOpacity},a.showDuration);for(b=0;b<e.length;b++)-1<e[b].tabIndex&&(g.push([e[b],e[b].tabIndex]),e[b].tabIndex="-1")};this.hide=function(){$(k).trigger({type:"neipanel.hide"});$("body").css("overflow","");var b={};b[a.position]="-105%";$(h).animate(b,a.hideDuration,"swing",function(){$(k).trigger({type:"neipanel.hidden"})});b={};b[n]="0";b[a.position]="0";$(f).animate(b,a.hideDuration);$(d).animate({opacity:"0"},a.hideDuration,"swing",function(){$(d).css("top","-105%")});for(b=0;b<g.length;b++)g[b][0].tabIndex="-1"==g[b][1]?void 0:g[b][1];g=[]}};if(l.constructor!=String)$(k).data("neipanel",new r(l));else if($(k).data("neipanel"))$(k).data("neipanel")[l]()};