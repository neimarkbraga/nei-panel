/*
    Title: Nei-Panel
    Author: Neimark Junsay Braga
    Date: 9/25/17
    Version: 1.0.0
*/
$.fn.neipanel=function(l){var c=this,u=function(a,c){var d,k,e,f,g,m,h,p=c||function(a){};a.addEventListener("touchstart",function(a){var c=a.changedTouches[0];d=null;k=c.pageX;e=c.pageY;h=(new Date).getTime();a.preventDefault()},!1);a.addEventListener("touchmove",function(a){a.preventDefault()},!1);a.addEventListener("touchend",function(a){var c=a.changedTouches[0];f=c.pageX-k;g=c.pageY-e;m=(new Date).getTime()-h;300>=m&&(150<=Math.abs(f)&&100>=Math.abs(g)?d=0>f?"left":"right":150<=Math.abs(g)&&100>=Math.abs(f)&&(d=0>g?"up":"bottom"));p(d);a.preventDefault()},!1)},v=function(a){var l=this;a=a||{};a.panelClass=a.panelClass||"";a.hideBarClass=a.hideBarClass||"";a.hideIconClass=a.hideIconClass||"";a.hideDuration=a.hideDuration||400;a.showDuration=a.showDuration||400;a.position=-1<["top","right","bottom","left"].indexOf(a.position)?a.position:"left";a.panelSize=a.panelSize||"300px";a.hideBarSize=a.hideBarSize||"20px";a.iconSize=a.iconSize||"10px";a.iconColor=a.iconColor||"rgb(75,75,75)";a.zIndex=a.zIndex||3;a.backdropOpacity=a.backdropOpacity||".5";a.swipe=void 0==a.swipe?!0:a.swipe;a.backdrop=void 0==a.backdrop?!0:a.backdrop;a.displayHideBar=void 0==a.displayHideBar?!0:a.displayHideBar;var d=void 0,k=[],e={top:"top"==a.position,right:"right"==a.position,bottom:"bottom"==a.position,left:"left"==a.position},f=document.createElement("div"),g=document.createElement("div"),m=document.createElement("span"),h=document.createElement("div"),p=e.bottom||e.top?"height":"width",q=function(a){switch(a){case "top":return"bottom";case "bottom":return"top";case "left":return"right";case "right":return"left";default:return null}},r=function(){for(var a=0;a<k.length;a++)k[a][0].tabIndex=k[a][1];k=[]},n=function(a){for(var b=0;b<a.length;b++)-1<a[b].tabIndex&&(k.push([a[b],a[b].tabIndex]),a[b].tabIndex="-1",a[b].blur())},t=function(){n($(h));n($(h).find("*"));n($(g));n($(g).find("*"));n($(f))};$(h).attr("class",a.panelClass).css("background-color","white").css("overflow","auto").css("position","fixed").css("z-index",String(parseInt(a.zIndex)+1)).css("height",e.bottom||e.top?a.panelSize:"100%").css("width",e.right||e.left?a.panelSize:"100%").append(c);for(d in e)d!=q(a.position)&&$(h).css(d,"0");$(h).css(a.position,"-105%");$(m).attr("class",a.hideIconClass);for(d in e)d==q(a.position)?$(m).css("border-"+d,a.iconSize+" solid "+a.iconColor):d!=a.position&&$(m).css("border-"+d,a.iconSize+" solid transparent");$(g).attr("class",a.hideBarClass).css("background-color","rgba(255,255,255,.5)").css("justify-content","center").css("align-items","center").css("overflow","hidden").css("cursor","pointer").css("position","fixed").css("display",a.displayHideBar?"flex":"none").css("height",e.bottom||e.top?"0":"100%").css("width",e.right||e.left?"0":"100%").css("z-index",String(parseInt(a.zIndex)+1)).append(m).on("click",function(){l.hide()});for(d in e)d!=q(a.position)&&$(g).css(d,"0");$(f).css("background-color","black").css("position","fixed").css("height","100%").css("width","100%").css("opacity","0").css("z-index",a.zIndex).css("top","-105%").css("right","0").css("bottom","0").css("left","0").on("click",function(){a.backdrop&&l.hide()});u(f,function(c){c==a.direction&&a.swipe&&l.hide()});$("body").append(h).append(g).append(f);this.show=function(){var d=function(b){b.isDefaultPrevented()||($(f).css("top","0"),$("body").css("overflow","hidden"),b={},b[a.position]="0",$(h).animate(b,a.showDuration,"swing",function(){$(c).trigger({type:"neipanel.shown"})}),b={},b[p]=a.hideBarSize,b[a.position]=a.panelSize,$(g).animate(b,a.showDuration),$(f).animate({opacity:a.backdropOpacity},a.showDuration),r(),n($("body *").not($(h)).not($(h).find("*")).not($(g)).not($(g).find("*")).not($(f)).not("script")));$(c).off("neipanel.show",d)};$(c).on("neipanel.show",d);$(c).trigger({type:"neipanel.show"})};this.hide=function(){var d=function(b){b.isDefaultPrevented()||($("body").css("overflow",""),b={},b[a.position]="-105%",$(h).animate(b,a.hideDuration,"swing",function(){$(c).trigger({type:"neipanel.hidden"})}),b={},b[p]="0",b[a.position]="0",$(g).animate(b,a.hideDuration),$(f).animate({opacity:"0"},a.hideDuration,"swing",function(){$(f).css("top","-105%")}));$(c).off("neipanel.hide",d)};$(c).on("neipanel.hide",d);$(c).trigger({type:"neipanel.hide"});r();t()};t()};if(l.constructor!=String)$(c).data("neipanel",new v(l));else if($(c).data("neipanel"))$(c).data("neipanel")[l]()};